[build]
  command = "npm run build"
  publish = "build"

# Redirect /api/* requests to Supabase Edge Function
[[redirects]]
  from = "/api/:slug"
  to = "https://bgkjcngrslxyqjitksim.supabase.co/functions/v1/api-endpoints/:slug"
  status = 200
  force = true
  headers = {Authorization = "Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImJna2pjbmdyc2x4eXFqaXRrc2ltIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjIwMDk2MDgsImV4cCI6MjA3NzU4NTYwOH0.7BWAMP7l3PoPr9NnTUz2WT5qo2sqt8ggA2AAHrqfrR0"}

# Redirect /nova/election requests to Supabase Edge Function
[[redirects]]
  from = "/nova/election"
  to = "https://bgkjcngrslxyqjitksim.supabase.co/functions/v1/nova-election"
  status = 200
  force = true
  headers = {Authorization = "Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImJna2pjbmdyc2x4eXFqaXRrc2ltIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjIwMDk2MDgsImV4cCI6MjA3NzU4NTYwOH0.7BWAMP7l3PoPr9NnTUz2WT5qo2sqt8ggA2AAHrqfrR0"}

# Redirect /nova/weather requests to Supabase Edge Function
[[redirects]]
  from = "/nova/weather"
  to = "https://bgkjcngrslxyqjitksim.supabase.co/functions/v1/nova-weather"
  status = 200
  force = true
  headers = {Authorization = "Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImJna2pjbmdyc2x4eXFqaXRrc2ltIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjIwMDk2MDgsImV4cCI6MjA3NzU4NTYwOH0.7BWAMP7l3PoPr9NnTUz2WT5qo2sqt8ggA2AAHrqfrR0"}

# Redirect /nova/finance requests to Supabase Edge Function
[[redirects]]
  from = "/nova/finance"
  to = "https://bgkjcngrslxyqjitksim.supabase.co/functions/v1/nova-finance"
  status = 200
  force = true
  headers = {Authorization = "Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImJna2pjbmdyc2x4eXFqaXRrc2ltIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjIwMDk2MDgsImV4cCI6MjA3NzU4NTYwOH0.7BWAMP7l3PoPr9NnTUz2WT5qo2sqt8ggA2AAHrqfrR0"}

# Redirect /nova/sports requests to Supabase Edge Function
[[redirects]]
  from = "/nova/sports"
  to = "https://bgkjcngrslxyqjitksim.supabase.co/functions/v1/nova-sports"
  status = 200
  force = true
  headers = {Authorization = "Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImJna2pjbmdyc2x4eXFqaXRrc2ltIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjIwMDk2MDgsImV4cCI6MjA3NzU4NTYwOH0.7BWAMP7l3PoPr9NnTUz2WT5qo2sqt8ggA2AAHrqfrR0"}

# SPA fallback - serve index.html for all other routes
[[redirects]]
  from = "/*"
  to = "/index.html"
  status = 200
